cmake_minimum_required(VERSION 3.1)

set(SOFA_KERNEL_MODULES_SOURCE_DIR ${SOFA_KERNEL_SOURCE_DIR}/modules)
set(SOFA_KERNEL_MODULES_BINARY_DIR ${CMAKE_BINARY_DIR}/SofaKernel)

set(SOFA_EXT_MODULES_SOURCE_DIR ..)
set(SOFA_EXT_MODULES_BINARY_DIR ${CMAKE_BINARY_DIR})

# SofaBase tests
add_subdirectory(${SOFA_KERNEL_MODULES_SOURCE_DIR}/SofaComponentBase/SofaComponentBase_test ${SOFA_KERNEL_MODULES_BINARY_DIR}/SofaBase/SofaComponentBase/SofaComponentBase_test)
add_subdirectory(${SOFA_KERNEL_MODULES_SOURCE_DIR}/SofaBaseCollision/SofaBaseCollision_test ${SOFA_KERNEL_MODULES_BINARY_DIR}/SofaBase/SofaBaseCollision/SofaBaseCollision_test)
add_subdirectory(${SOFA_KERNEL_MODULES_SOURCE_DIR}/SofaBaseLinearSolver/SofaBaseLinearSolver_test ${SOFA_KERNEL_MODULES_BINARY_DIR}/SofaBase/SofaBaseLinearSolver/SofaBaseLinearSolver_test)
add_subdirectory(${SOFA_KERNEL_MODULES_SOURCE_DIR}/SofaBaseMechanics/SofaBaseMechanics_test ${SOFA_KERNEL_MODULES_BINARY_DIR}/SofaBase/SofaBaseMechanics/SofaBaseMechanics_test)
add_subdirectory(${SOFA_KERNEL_MODULES_SOURCE_DIR}/SofaBaseTopology/SofaBaseTopology_test ${SOFA_KERNEL_MODULES_BINARY_DIR}/SofaBase/SofaBaseTopology/SofaBaseTopology_test)
add_subdirectory(${SOFA_KERNEL_MODULES_SOURCE_DIR}/SofaBaseVisual/SofaBaseVisual_test ${SOFA_KERNEL_MODULES_BINARY_DIR}/SofaBase/SofaBaseVisual/SofaBaseVisual_test)

# SofaCommon tests
add_subdirectory(${SOFA_KERNEL_MODULES_SOURCE_DIR}/SofaDeformable/SofaDeformable_test ${SOFA_KERNEL_MODULES_BINARY_DIR}/SofaCommon/SofaDeformable/SofaDeformable_test)
add_subdirectory(${SOFA_KERNEL_MODULES_SOURCE_DIR}/SofaEngine/SofaEngine_test ${SOFA_KERNEL_MODULES_BINARY_DIR}/SofaCommon/SofaEngine/SofaEngine_test)
add_subdirectory(${SOFA_KERNEL_MODULES_SOURCE_DIR}/SofaExplicitOdeSolver/SofaExplicitOdeSolver_test ${SOFA_KERNEL_MODULES_BINARY_DIR}/SofaCommon/SofaExplicitOdeSolver/SofaExplicitOdeSolver_test)
add_subdirectory(${SOFA_KERNEL_MODULES_SOURCE_DIR}/SofaImplicitOdeSolver/SofaImplicitOdeSolver_test ${SOFA_KERNEL_MODULES_BINARY_DIR}/SofaCommon/SofaImplicitOdeSolver/SofaImplicitOdeSolver_test)
add_subdirectory(${SOFA_KERNEL_MODULES_SOURCE_DIR}/SofaLoader/SofaLoader_test ${SOFA_KERNEL_MODULES_BINARY_DIR}/SofaCommon/SofaLoader/SofaLoader_test)
add_subdirectory(${SOFA_KERNEL_MODULES_SOURCE_DIR}/SofaMeshCollision/SofaMeshCollision_test ${SOFA_KERNEL_MODULES_BINARY_DIR}/SofaCommon/SofaMeshCollision/SofaMeshCollision_test)
add_subdirectory(${SOFA_KERNEL_MODULES_SOURCE_DIR}/SofaRigid/SofaRigid_test ${SOFA_KERNEL_MODULES_BINARY_DIR}/SofaCommon/SofaRigid/SofaRigid_test)
add_subdirectory(${SOFA_KERNEL_MODULES_SOURCE_DIR}/SofaSimpleFem/SofaSimpleFem_test ${SOFA_KERNEL_MODULES_BINARY_DIR}/SofaCommon/SofaSimpleFem/SofaSimpleFem_test)

# SofaFramework tests
add_subdirectory(${SOFA_KERNEL_MODULES_SOURCE_DIR}/sofa/simulation/simulation_test  ${SOFA_KERNEL_MODULES_BINARY_DIR}/SofaSimulation/simulation_test)
add_subdirectory(${SOFA_KERNEL_MODULES_SOURCE_DIR}/sofa/frameworkextra/frameworkextra_test ${SOFA_KERNEL_MODULES_BINARY_DIR}/SofaFramework/frameworkextra_test)

# SofaGeneral tests
add_subdirectory(${SOFA_EXT_MODULES_SOURCE_DIR}/SofaBoundaryCondition/SofaBoundaryCondition_test ${SOFA_EXT_MODULES_BINARY_DIR}/SofaGeneral/SofaBoundaryCondition/SofaBoundaryCondition_test)
add_subdirectory(${SOFA_EXT_MODULES_SOURCE_DIR}/SofaConstraint/SofaConstraint_test ${SOFA_EXT_MODULES_BINARY_DIR}/SofaGeneral/SofaConstraint/SofaConstraint_test)
# add_subdirectory(${SOFA_EXT_MODULES_SOURCE_DIR}/SofaGeneralDeformable/SofaGeneralDeformable_test ${SOFA_EXT_MODULES_BINARY_DIR}/SofaGeneral/SofaGeneralDeformable/SofaGeneralDeformable_test)
add_subdirectory(${SOFA_EXT_MODULES_SOURCE_DIR}/SofaGeneralEngine/SofaGeneralEngine_test ${SOFA_EXT_MODULES_BINARY_DIR}/SofaGeneral/SofaGeneralEngine/SofaGeneralEngine_test)
add_subdirectory(${SOFA_EXT_MODULES_SOURCE_DIR}/SofaGeneralExplicitOdeSolver/SofaGeneralExplicitOdeSolver_test ${SOFA_EXT_MODULES_BINARY_DIR}/SofaGeneral/SofaGeneralExplicitOdeSolver/SofaGeneralExplicitOdeSolver_test)
add_subdirectory(${SOFA_EXT_MODULES_SOURCE_DIR}/SofaGeneralImplicitOdeSolver/SofaGeneralImplicitOdeSolver_test ${SOFA_EXT_MODULES_BINARY_DIR}/SofaGeneral/SofaGeneralImplicitOdeSolver/SofaGeneralImplicitOdeSolver_test)
add_subdirectory(${SOFA_EXT_MODULES_SOURCE_DIR}/SofaGeneralTopology/SofaGeneralTopology_test ${SOFA_EXT_MODULES_BINARY_DIR}/SofaGeneral/SofaGeneralTopology/SofaGeneralTopology_test)
# add_subdirectory(${SOFA_EXT_MODULES_SOURCE_DIR}/SofaGeneralLinearSolver/SofaGeneralLinearSolver_test ${SOFA_EXT_MODULES_BINARY_DIR}/SofaGeneral/SofaGeneralLinearSolver/SofaGeneralLinearSolver_test)
add_subdirectory(${SOFA_EXT_MODULES_SOURCE_DIR}/SofaGeneralLoader/SofaGeneralLoader_test ${SOFA_EXT_MODULES_BINARY_DIR}/SofaGeneral/SofaGeneralLoader/SofaGeneralLoader_test)
# add_subdirectory(${SOFA_EXT_MODULES_SOURCE_DIR}/SofaGeneralMeshCollision/SofaGeneralMeshCollision_test ${SOFA_EXT_MODULES_BINARY_DIR}/SofaGeneral/SofaGeneralMeshCollision/SofaGeneralMeshCollision_test)
# add_subdirectory(${SOFA_EXT_MODULES_SOURCE_DIR}/SofaGeneralRigid/SofaGeneralRigid_test ${SOFA_EXT_MODULES_BINARY_DIR}/SofaGeneral/SofaGeneralRigid/SofaGeneralRigid_test)
add_subdirectory(${SOFA_EXT_MODULES_SOURCE_DIR}/SofaGeneralSimpleFem/SofaGeneralSimpleFem_test ${SOFA_EXT_MODULES_BINARY_DIR}/SofaGeneral/SofaGeneralSimpleFem/SofaGeneralSimpleFem_test)
add_subdirectory(${SOFA_EXT_MODULES_SOURCE_DIR}/SofaGraphComponent/SofaGraphComponent_test ${SOFA_EXT_MODULES_BINARY_DIR}/SofaGeneral/SofaGraphComponent/SofaGraphComponent_test)

# SofaMisc tests
add_subdirectory(${SOFA_EXT_MODULES_SOURCE_DIR}/SofaMiscFem/SofaMiscFem_test ${SOFA_EXT_MODULES_BINARY_DIR}/SofaMisc/SofaMiscFem/SofaMiscFem_test)
add_subdirectory(${SOFA_EXT_MODULES_SOURCE_DIR}/SofaMisc/SofaMisc_test ${SOFA_EXT_MODULES_BINARY_DIR}/SofaMisc/SofaMisc/SofaMisc_test)
add_subdirectory(${SOFA_EXT_MODULES_SOURCE_DIR}/SofaMiscMapping/SofaMiscMapping_test ${SOFA_EXT_MODULES_BINARY_DIR}/SofaMisc/SofaMiscMapping/SofaMiscMapping_test)
add_subdirectory(${SOFA_EXT_MODULES_SOURCE_DIR}/SofaMiscSolver/SofaMiscSolver_test ${SOFA_EXT_MODULES_BINARY_DIR}/SofaMisc/SofaMiscSolver/SofaMiscSolver_test)
add_subdirectory(${SOFA_EXT_MODULES_SOURCE_DIR}/SofaMiscTopology/SofaMiscTopology_test ${SOFA_EXT_MODULES_BINARY_DIR}/SofaMisc/SofaMiscTopology/SofaMiscTopology_test)
add_subdirectory(${SOFA_EXT_MODULES_SOURCE_DIR}/SofaMiscForceField/SofaMiscForceField_test ${SOFA_EXT_MODULES_BINARY_DIR}/SofaMisc/SofaMiscForceField/SofaMiscForceField_test)

# Module tests
add_subdirectory(${SOFA_EXT_MODULES_SOURCE_DIR}/SofaExporter/SofaExporter_test ${SOFA_EXT_MODULES_BINARY_DIR}/modules/SofaExporter/SofaExporter_test)
add_subdirectory(${SOFA_EXT_MODULES_SOURCE_DIR}/SofaOpenglVisual/SofaOpenglVisual_test ${SOFA_EXT_MODULES_BINARY_DIR}/modules/SofaOpenglVisual/SofaOpenglVisual_test)
